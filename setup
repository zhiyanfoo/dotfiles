#!/usr/bin/env bash

# practically everything here is copied from somewhere else

# exit script if any command fails
set -e
# print each line before running
set -x

# Close any open System Preferences panes, to prevent them from overriding
# settings weâ€™re about to change
source /opt/zen/zen use neovim

pushd "$HOME/.vim/bundle/LanguageClient-neovim"
bash install.sh
popd

deactivate

###############################################################################
# vim plugins                                                                 #
###############################################################################


###############################################################################
# config                                                                      #
###############################################################################


ln -s $HOME/dotfiles/aliases $HOME/.aliases
rm -f $HOME/.bash_profile
ln -s $HOME/dotfiles/bash_profile $HOME/.bash_profile
ln -s $HOME/dotfiles/commonprofile $HOME/.commonprofile
ln -s $HOME/dotfiles/functions $HOME/.functions
ln -s $HOME/dotfiles/tmux.conf $HOME/.tmux.conf
ln -s $HOME/dotfiles/vimrc $HOME/.vimrc
ln -s $HOME/dotfiles/zshrc $HOME/.zshrc

ln -s $HOME/dotfiles/global_gitignore $HOME/.global_gitignore
git config --global core.excludesfile $HOME/.global_gitignore 

ln -s $HOME/dotfiles/nvimlispwords.lua $HOME/.config/nvimlispwords.lua
ln -s $HOME/dotfiles/ripgreprc $HOME/.config/ripgreprc

mkdir -p $HOME/.config/nvim/
ln -s $HOME/dotfiles/snippets $HOME/.config/nvim/snippets
ln -s $HOME/dotfiles/nvim_init.vim $HOME/.config/nvim/init.vim

ln -s $HOME/dotfiles/zsh-completion $HOME/.zsh-completion

# let nvim find ftplugins
mkdir -p $HOME/.config/nvim/after
ln -s $HOME/dotfiles/ftplugin $HOME/.config/nvim/after/ftplugin
ln -s $HOME/dotfiles/lua $HOME/.config/nvim/lua
ln -s $HOME/dotfiles/aichat/roles.yaml "$HOME/Library/Application Support/aichat/roles.yaml"



###############################################################################
# Colorscheme                                                                 #
##############################################################################

# Load into iterm manually
mkdir -p $HOME/tools
git clone "https://github.com/altercation/solarized" $HOME/tools/solarized

###############################################################################
# Secrets                                                                     #
###############################################################################

mkdir $HOME/.secrets
touch $HOME/.secrets/secrets
